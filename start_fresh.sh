#!/bin/bash

# ุณูุฑูุจุช ูุฅุนุงุฏุฉ ุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุดุบูู ุงูุจูุช ูู ุงูุจุฏุงูุฉ

echo "๐ ุจุฏุก ุนูููุฉ ุฅุนุงุฏุฉ ุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุชุดุบูู ุงูุจูุช..."
echo ""

# ุงูุชุญูู ูู ูุฌูุฏ ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
if [ ! -d "env" ]; then
    echo "โ ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ ุบูุฑ ููุฌูุฏุฉ!"
    echo "ูุฑุฌู ุฅูุดุงุก ุงูุจูุฆุฉ ุฃููุงู: python -m venv env"
    exit 1
fi

# ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ
echo "๐ฆ ุชูุนูู ุงูุจูุฆุฉ ุงูุงูุชุฑุงุถูุฉ..."
source env/bin/activate

# ุงูุชุญูู ูู ูุฌูุฏ ุงููููุงุช ุงููุทููุจุฉ
if [ ! -f "shams-info.txt" ]; then
    echo "โ ููู shams-info.txt ุบูุฑ ููุฌูุฏ!"
    exit 1
fi

# ุฅุนุงุฏุฉ ุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
echo ""
echo "๐ ุฌุงุฑู ุฅุนุงุฏุฉ ุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุชุฌูุฉ..."
python rebuild_vectorstore.py

if [ $? -ne 0 ]; then
    echo "โ ูุดูุช ุนูููุฉ ุฅุนุงุฏุฉ ุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช!"
    exit 1
fi

echo ""
echo "โ ุชู ุฅุนุงุฏุฉ ุจูุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!"
echo ""
echo "๐ก ุงูุขู ููููู ุชุดุบูู ุงูุจูุช:"
echo "   - ูููุงุฌูุฉ ุงูุชูุงุนููุฉ: python app.py"
echo "   - ููู API: uvicorn api:app --reload"
echo ""

